let player ={
	profil:{
		name: 'DayJ',
		class: 'Bookwurm',
		level:0,
		XP: 25,
	},
	stats:{
		HP:50,
		mana:20,
		AtkPwr:20,
		magicPWR:40,
	},
	alive:true,
	inventory:['belt','hat', 'library card'],
	image: 'css/img/bookworm.png',
	gif:'',
	
};
let mouse={
	alive:true,
	name:'mouse',
	level :2,
	HP:30,
	AtkPwr:50,
	XP:10,
}
//Getting elements From HTML
const CombatText= document.getElementById('combatText')
const playerProfil= document.getElementById('playerProfil')
const playerStats = document.getElementById('playerStats')

//Varriables for input

//loading player info
	//Home Side Code Portrait
const PlayerPortrain= function(){
	document.getElementById('charPortrait').src=player.image;
};
window.onload= PlayerPortrain();


	//player profile
const MakePlayerProfil= function(){
	for (let [item, value] of Object.entries(player.profil)){
			let text= `${item} : ${value}` 
			let pElement= document.createElement('p')
			pElement.innerHTML =text;
			playerProfil.appendChild(pElement)
	}
};

const MakePlayerStats =function(){
	for (let [item, value] of Object.entries(player.stats)){
			let text= `${item} : ${value}` 
			let pElement= document.createElement('p')
			pElement.innerHTML =text;
			playerStats.appendChild(pElement)
	}
}
window.onload= MakePlayerProfil();
window.onload= MakePlayerStats();
window.onload= PlayerPortrain();



//Combat code!
	// all make elements
const makeCombatText=function(text){
	let pElement= document.createElement('p')
	pElement.innerHTML =text;
	CombatText.insertBefore(pElement, CombatText.firstChild);
};

const makeLinkElement = function(text){
	let aElement =document.createElement('a')
	aElement.innerHTML=text;
	if(mouse.alive){
		aElement.href='NewChar.html';
	}else if(player.alive){
		aElement.href='index.html';
	}
	CombatText.insertBefore(aElement, CombatText.firstChild);
};

//Enemy combat
const enemyAttack= function(){
	let damage = mouse.AtkPwr*0.5
	player.HP = player.HP-damage
	let text=`You take ${damage} damage from bunny. You have ${player.HP} HP left`
	makeCombatText(text)
};

const gainXP = function(){
	if(player.profil.level>=20){
		let text ='You dude is max level, you should get a real life!!'
		makeCombatText(text)
	}else{
		let XPGain = mouse.XP*(1-(player.profil.level*0.05))
		player.profil.XP += XPGain 
		if (player.profil.XP >30){
			player.profil.level++;
			let text =`daim son you just gained a level, your now a lvl ${player.profil.level} ${player.profil.class}. Good on ya`;
			makeCombatText(text)
			player.profil.XP=player.profil.XP%30
		}
		console.log(player.profil.XP)
	}
};


//player Combat
const playerAttack= function(damage, type){
	mouse.HP = mouse.HP-damage
	let text=`Enemy mouse takes ${damage} of ${type} damage. The mouse has ${mouse.HP} HP left`
	makeCombatText(text)
};

const shield= function(){
	let text= "You hide like a chicken behind your shield"
	let enemyAttack ="enemy looks at your shiled waiting for you to get out behind it."
	makeCombatText(text)
	makeCombatText(enemyAttack)
};

const run= function(){
	let text= 'You run home to your mama'
	makeCombatText(text);
};
// lifecheckers

const lifecheck =function(){
	if(player.HP<=0){
	player.alive=false;
	let text = 'YOU ARE DEAD!!'
	makeCombatText(text)
	resetHero()
	}
};

const enemyLifeCheck= function(){
	if(mouse.HP <=0){
	mouse.alive=false;
	let text ='The mouse is dead, the land is greifing for the lose of this brave soul'	
	makeCombatText(text)
	saveHero()
	}
};

//Combat Phase

const playerMove= function(type){
	if(player.alive && mouse.alive){
		if(type==='attack'){
		let attack= player.AtkPwr*0.5;	
		combatPhase(attack, type)
		}else if(type == 'magic')
		{
		let attack= player.magicPWR*0.75;
		combatPhase(attack, type)
		}
	}else if(mouse.alive){
		let linktext= 'Click here to make a new charracter'
		let text='Mate your dead, no going back. Gotta make a new dude to fight some more dudes.'
		makeCombatText(text);
		makeLinkElement(linktext)
	}else{
		let linktext = 'Click here to go back to your home';
		let text='Leavet it man, its dead already no point in beating a dead house.... Well you know the sayin.. Enouigh is enough.'
		makeCombatText(text);
		makeLinkElement(linktext);
	}
};

const combatPhase= function(attack, type){
	playerAttack(attack, type)
	enemyLifeCheck()
	if(mouse.alive){
		enemyAttack()
		lifecheck()
	}else{
		playerWin()
	}
};
// AfterCombate
const playerWin= function(){
	gainXP()
};

//save Load and Reset
const resetHero=function(){
	window.localStorage.clear()
};

const saveHero=function(){
	window.localStorage.setItem(player, JSON.stringify(player))
};

const loadHero=function(){
	player = JSON.parse(window.localStorage.getItem("ToDoList"))
};

const newHero=function(){
	resetHero()
player ={
	profil:{
		name: 'John',
		class: 'Bookwurm',
		level:0,
		XP: 0,
	},
	alive:true,
	inventory:['belt','hat', 'library card'],
	HP:50,
	mana:20,
	AtkPwr:20,
	magicPWR:40,
	image: 'css/img/bookworm.png',
	
	}

};
// Making a new hero

const getPlayerInput= function(){
	let playerName = getName()
	let playerClass = getClass()
	console.log(playerName + playerClass)
};

const getName= function(){
	document.getElementById('CharName').value
};

const getClass= function(){
	 document.getElementById('selectedClass').value
};
//const getGif(){}

// getting Gif
//let gifs=

const performSearch = function(){
    fetch(`http://api.giphy.com/v1/gifs/search?q=cat&api_key=dc6zaTOxFJmzC`)
    .then( response => response.json())
        .then(responseData => {
           gifs :responseData.data.data})
        .catch(error =>{
          console.log('error in Fetching or parsing data', error)
        });
        console.log(gifs)
    };











