//Getting elements From HTML
let	CombatText = document.getElementById('combatText')

//Player Portrait

// const PlayerPortrain= function(){
// 	document.getElementById('charPortrait').src=player.image;
// };
// window.onload= PlayerPortrain();


//Combat code!
	// all make elements
const makeCombatText=function(text){
	let pElement= document.createElement('p')
	pElement.innerHTML =text;
	CombatText.insertBefore(pElement, CombatText.firstChild);
};

const makeLinkElement = function(text){
	let aElement =document.createElement('a')
	aElement.innerHTML=text;
	if(mouse.alive){
		aElement.href='NewChar.html';
	}else if(player.alive){
		aElement.href='index.html';
	}
	CombatText.insertBefore(aElement, CombatText.firstChild);
};

//Enemy combat
const enemyAttack= function(){
	let damage = mouse.AtkPwr*0.5
	player.stats.HP = player.stats.HP-damage
	let text=`You take ${damage} damage from bunny. You have ${player.stats.HP} HP left`
	makeCombatText(text)
};

const gainXP = function(){
	if(player.profile.level>=20){
		let text ='You dude is max level, you should get a real life!!'
		makeCombatText(text)
	}else{
		let XPGain = mouse.XP*(1-(player.profile.level*0.05))
		player.profile.XP += XPGain 
		console.log(player.profile.XP)
		if (player.profile.XP >30){
			player.profile.level++;
			let text =`daim son you just gained a level, your now a lvl ${player.profile.level} ${player.profile.class}. Good on ya`;
			makeCombatText(text)
			player.profile.XP=player.profile.XP%30
		}
	}
};


//player Combat
const playerAttack= function(damage, type){
	mouse.HP = mouse.HP-damage
	let text=`Enemy mouse takes ${damage} of ${type} damage. The mouse has ${mouse.HP} HP left`
	makeCombatText(text)
};

const shield= function(){
	let text= "You hide like a chicken behind your shield"
	let enemyAttack ="enemy looks at your shiled waiting for you to get out behind it."
	makeCombatText(text)
	makeCombatText(enemyAttack)
};

const run= function(){
	let text= 'You run home to your mama'
	makeCombatText(text);
};
// lifecheckers

const lifecheck =function(){
	if(player.stats.HP<=0){
		player.alive=false;
		let text = 'YOU ARE DEAD!!'
		makeCombatText(text)
		resetHero()
	}
};

const enemyLifeCheck= function(){
	if(mouse.HP <=0){
	mouse.alive=false;
	let text ='The mouse is dead, the land is greifing for the lose of this brave soul'	
	makeCombatText(text)
	}
};

//Combat Phase

const playerMove= function(type){
	if(player.alive && mouse.alive){
		if(type==='attack'){
			let attack= player.stats.AtkPwr*0.5;
			combatPhase(attack, type)
		}else if(type == 'magic'){
			let attack= player.stats.magicPWR*0.75;
			combatPhase(attack, type)
		}
	}else if(mouse.alive){
		let linktext= 'Click here to make a new charracter'
		let text='Mate your dead, no going back. Gotta make a new dude to fight some more dudes.'
		makeCombatText(text);
		makeLinkElement(linktext)
		resetHero()
	}else{
		let linktext = 'Click here to go back to your home';
		let text='Leavet it man, its dead already no point in beating a dead house.... Well you know the sayin.. Enouigh is enough.'
		makeCombatText(text);
		makeLinkElement(linktext);
	}
};

const combatPhase= function(attack, type){
	playerAttack(attack, type)
	enemyLifeCheck()
	if(mouse.alive){
		enemyAttack()
		lifecheck()
	}else{
		playerWin()
	}
};
// AfterCombate
const playerWin= function(){
	gainXP()
	saveHero(player)
};

//getting Gif


// const performSearch = function(){
// 	fetch(`http://api.giphy.com/v1/gifs/search?q=cat&api_key=dc6zaTOxFJmzC`)
// 	.then( response => response.json())
// 	.then(responseData => {	gifs =responseData.data.data})
// 	.catch(error =>{
// 	console.log('error in Fetching or parsing data', error)
// 	});
// console.log(gifs)
// };










